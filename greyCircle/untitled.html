<html>

<head>
	<link rel="stylesheet" href="untitled.css"> </head>

<body onload="init()">
	<div id="container">
		<div class="time" id="overlay">Time: 60</div>
		<br>
		<div class="score" id="overlay">Hits: 0</div>
		<div class="miss" id="overlay"></div>
	</div>
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
	<script>
		//synonymous variables for circle circumference...names carried over from previous version...to be changed
		var circleWidth, circleHeight;
		var already_hit_spots = [];
		var hotspots = [
			{
				top: "10%"
				, left: "10%"
			}
			, {
				top: "70%"
				, left: "70%"
			}
		];
		var score = 0;
		var time = 60;

		function init() {
			createHotspots();
			var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
			var h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
			document.getElementById("container").style.width = w;
			document.getElementById("container").style.height = h;
			circleWidth = w / 25;
			circleHeight = w / 25;
			$("#container").prepend('<canvas id="mycanvas" style="border: 1px solid #ccc"> Canvas element not supported	<br/> </canvas>');
			$("#mycanvas").attr("width", w + "px");
			$("#mycanvas").attr("height", h + "px");
			// Get a reference to our touch-sensitive element
			var touchzone = document.getElementById("mycanvas");
			touchzone.addEventListener("touchstart", drawCircle, false);
			$(".hit").click(function (event) {
				var targetId = $(event.target).attr("id");
				console.log(targetId);
				$("#" + targetId).css("animation", "border .5s ease 1 forwards");
				if (already_hit_spots.indexOf(targetId) == -1) {
					already_hit_spots.push(targetId);
					++score;
					$(".score").text("Hits: " + score);
				}
			});
			setTimeout(function () {
				--time;
				$(".time").text("Time: " + time);
			}, 1000);
		}
			$(window).on("orientationchange", function () {
				location.reload();
			});

		function createHotspots() {
			for (var i = 0; i < hotspots.length; i++) {
				$("#container").prepend('<div class="hit" id="hit' + i + '"/>');
				$("#hit" + i).css("left", hotspots[i].left);
				$("#hit" + i).css("top", hotspots[i].top);
				$("#hit" + i).css("width", "4%");
				$("#hit" + i).css("height", "7%");
			};
		}

		function drawCircle(event) {
			$(".miss").css("width", circleWidth + "px");
			$(".miss").css("height", circleHeight + "px");
			//left
			$(".miss").css("left", event.touches[0].pageX - circleWidth / 2);
			//top
			$(".miss").css("top", event.touches[0].pageY - circleHeight / 2);
			$(".miss").css("animation", "unborder .5s ease 1 forwards");
			setTimeout(function () {
				$(".miss").css("animation", "");
				//left reset for reclicking 
				$(".miss").css("left", 0);
				//top reset for reclicking 
				$(".miss").css("top", 0);
			}, 350);
		}
	</script>
</body>

</html>