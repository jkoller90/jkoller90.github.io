<html>

<head>
	<link rel="stylesheet" href="untitled.css"> </head>

<body id="hello">
	<div id="container">
		<div class="time" id="overlay">Time: 60
			<br> </div>
		<br>
		<br>
		<div class="score" id="overlay">Hits: 0</div>
		<div class="miss" id="overlay"></div>
	</div>
	<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
	<script>
		var image_width = $("body").width()
			, image_height = $("body").height();
		//synonymous variables for circle circumference...names carried over from previous version...to be changed
		var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
		var circleWidth = image_width/25;
		var circleHeight; //= image_height
		var already_hit_spots = [];
		var hotspots = [
			{
				top: (image_height * .53) + "px"
				, left: (image_width * .51) + "px"
			} //chair 1
			, {
				top: (image_height * .52) + "px"
				, left: (image_width * .365) + "px"
			} //chair 2 
						, {
				top: (image_height * .52) + "px"
				, left: (image_width * .21) + "px"
			} //chair 3 
				, {
				top: (image_height * .52) + "px"
				, left: (image_width * .10) + "px"
			} // chair 4
			, {
				top: (image_height * .38) + "px"
				, left: (image_width * .02) + "px"
			} // boat 
						, {
				top: (image_height*.28)+"px"
				, left: (image_width*.245)+"px"
			} //bell
						, {
				top: (image_height*.125)+"px"
				, left: (image_width*.515)+"px"
			} //window

		];
		var score = 0;
		var time = 60;
		createHotspots();
		var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
		var h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
		document.getElementById("container").style.width = w;
		document.getElementById("container").style.height = h;
		circleWidth = w / 25;
		circleHeight = w / 25;
		$("#container").prepend('<canvas id="mycanvas" style="border: 1px solid #ccc"> Canvas element not supported	<br/> </canvas>');
		$("#mycanvas").attr("width", w + "px");
		$("#mycanvas").attr("height", h + "px");
		//
		var touchzone = document.getElementById("mycanvas");
		touchzone.addEventListener("touchstart", drawCircle, false);
		if (!iOS) {
			touchzone.addEventListener("mousedown", mouse_drawCircle, false);
		}
		setInterval(function () {
			if (time > 0) {
				--time;
			}
			$(".time").text("Time: " + time);
		}, 1000);
		$(window).on("orientationchange", function () {
			location.reload();
		});

		function createHotspots() {
			for (var i = 0; i < hotspots.length; i++) {
				$("#container").prepend('<div class="hit" id="hit' + i + '"/>');
				$("#hit" + i).css("left", hotspots[i].left);
				$("#hit" + i).css("top", hotspots[i].top);
				$("#hit" + i).css("width", circleWidth + "px");
				$("#hit" + i).css("height", circleWidth + "px");
			};
		}
		var clicked = {};
		var hotspots = document.getElementsByClassName("hit");
		for (var i = 0; i < hotspots.length; i++) {
			var id = hotspots[i].getAttribute("id");
			clicked[id] = false;
		}
		$(".hit").click(function (event) {
			if (!clicked[this.getAttribute("id")]) {
				$("#" + this.getAttribute("id")).css("animation", "border .5s ease 1 forwards");
				++score;
				$(".score").text("Hits: " + score);
				clicked[this.getAttribute("id")] = true;
			}
		})

		function drawCircle(event) {
			$(".miss").css("width", circleWidth + "px");
			$(".miss").css("height", circleHeight + "px");
			//left
			$(".miss").css("left", event.touches[0].pageX - circleWidth / 2);
			//top
			$(".miss").css("top", event.touches[0].pageY - circleHeight / 2);
			$(".miss").css("animation", "unborder .5s ease 1 forwards");
			setTimeout(function () {
				$(".miss").css("animation", "");
				//left reset for reclicking 
				$(".miss").css("left", 0);
				//top reset for reclicking 
				$(".miss").css("top", 0);
			}, 350);
		}

		function mouse_drawCircle(event) {
			$(".miss").css("width", circleWidth + "px");
			$(".miss").css("height", circleHeight + "px");
			//left
			$(".miss").css("left", event.pageX - circleWidth / 2);
			//top
			$(".miss").css("top", event.pageY - circleHeight / 2);
			$(".miss").css("animation", "unborder .5s ease 1 forwards");
			setTimeout(function () {
				$(".miss").css("animation", "");
				//left reset for reclicking 
				$(".miss").css("left", 0);
				//top reset for reclicking 
				$(".miss").css("top", 0);
			}, 350);
		}
	</script>
</body>

</html>